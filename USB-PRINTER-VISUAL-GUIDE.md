# USB Printer Integration - Visual Guide

## User Interface Changes

### Teller Salary Calculation Page - Navigation Bar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â—„] [This Week] [â–º]  â”‚  ğŸ“… [Date Input]  â”‚  Nov 25 - Dec 01  â”‚  âš™ï¸ [Printer Name]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â†‘
                                            Click to expand
                                           Printer Settings
```

### Printer Settings Panel (When Expanded)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–²ï¸ USB PRINTER SETTINGS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Available Printers:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ–²ï¸ XPrinter 58mm Thermal              [âœ“]     â”‚ â”‚
â”‚  â”‚    (Selected)                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ–¨ï¸  HP LaserJet Pro M404n                      â”‚ â”‚
â”‚  â”‚    (Default Printer)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ–¨ï¸  Ricoh MP C3503                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ï¸  Auto-print when button clicked           â”‚   â”‚
â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚ When enabled, clicking print will directly   â”‚   â”‚
â”‚  â”‚ send to the selected printer without showing â”‚   â”‚
â”‚  â”‚ a preview dialog.                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â”‚                  [Close Settings]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Teller Salary Card (with Print Button)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€ John Doe                    [ğŸ–¨ï¸ Print] â”€â” â”‚
â”‚  â”‚ Teller ID: T-001                          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                            â”‚ â”‚
â”‚  â”‚  Base Salary    â‚±3,150.00                  â”‚ â”‚
â”‚  â”‚                                            â”‚ â”‚
â”‚  â”‚  Daily Over (Cash)                         â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚ â”‚
â”‚  â”‚  Mon  â‚±45.00    â‚±450.00                    â”‚ â”‚
â”‚  â”‚  Tue  â‚±60.00    â‚±450.00                    â”‚ â”‚
â”‚  â”‚  Wed  â‚±30.00    â‚±450.00                    â”‚ â”‚
â”‚  â”‚  ...                                       â”‚ â”‚
â”‚  â”‚                                            â”‚ â”‚
â”‚  â”‚  Weekly Over Total    â‚±315.00              â”‚ â”‚
â”‚  â”‚  Total Compensation   â‚±3,465.00            â”‚ â”‚
â”‚  â”‚                                            â”‚ â”‚
â”‚  â”‚  Prepared By  ___________________           â”‚ â”‚
â”‚  â”‚  Supervisor   ___________________           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘
   Click Print button to print this report
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teller Salary Page  â”‚
â”‚  (React Component)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1. Click Settings (âš™ï¸)
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Printer Settings Panel         â”‚
â”‚  - fetchAvailablePrinters()     â”‚
â”‚  - handleSelectPrinter()        â”‚
â”‚  - toggleAutoPrint()            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 2. Call Electron API
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Electron Preload (IPC Bridge)   â”‚
â”‚  - getAvailablePrinters()       â”‚
â”‚  - printHTML(html, printer)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 3. IPC Invoke
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Electron Main Process            â”‚
â”‚  - getAvailablePrinters()        â”‚
â”‚  - printHtml(html, selected)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 4. System Printer API
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Windows Printer Subsystem        â”‚
â”‚  - Get printer list              â”‚
â”‚  - Send print job                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ğŸ–²ï¸ USB  â”‚
     â”‚ Printer   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

```
TellerSalaryCalculation Component

State Variables:
â”œâ”€â”€ availablePrinters: Printer[]
â”‚   â””â”€â”€ { name: "XPrinter 58mm", isDefault: false }
â”‚
â”œâ”€â”€ selectedPrinter: Printer | null
â”‚   â””â”€â”€ Stored in localStorage as "selectedPrinterName"
â”‚
â”œâ”€â”€ showPrinterSettings: boolean
â”‚   â””â”€â”€ Controls UI visibility
â”‚
â””â”€â”€ autoPrintEnabled: boolean
    â””â”€â”€ Stored in localStorage as "autoPrintEnabled"


localStorage Keys:
â”œâ”€â”€ "selectedPrinterName"    â†’ "XPrinter 58mm"
â””â”€â”€ "autoPrintEnabled"       â†’ "true" | "false"
```

## Print Flow

### With Auto-Print Enabled

```
User clicks Print
    â†“
handlePrint(teller)
    â†“
Validate printer selected
    â†“
Build HTML from teller data
    â†“
Send to Electron: printHTML(html, selectedPrinter)
    â†“
Electron finds printer by device name
    â†“
Send to Windows Print Queue
    â†“
ğŸ–²ï¸ USB Printer prints
    â†“
Toast: "Printing to XPrinter 58mm..." âœ…
```

### With Auto-Print Disabled

```
User clicks Print
    â†“
handlePrint(teller)
    â†“
Build HTML from teller data
    â†“
Send to Electron: printHTML(html, selectedPrinter)
    â†“
Opens print preview window
    â†“
User selects printer in dialog
    â†“
User clicks Print
    â†“
ğŸ–²ï¸ Printer prints
```

## Printer Auto-Detection Logic

```
Initialize Printer Selection
    â†“
Call getAvailablePrinters()
    â†“
Check localStorage for "selectedPrinterName"
    â”œâ”€ YES â”€ Found saved printer
    â”‚         â””â”€ Restore and use it
    â”‚
    â””â”€ NO â”€ Try auto-detect logic
            â”œâ”€ Look for thermal printer (58mm, XPrinter, TSC)
            â”‚   â”œâ”€ YES â”€ Use thermal printer
            â”‚   â””â”€ NO
            â”‚
            â””â”€ Look for default printer
                â”œâ”€ YES â”€ Use default
                â””â”€ NO â”€ Use first available
```

## Supported Printer Names (Auto-Detection)

Thermal printers are detected if name contains:
- "58"
- "thermal"
- "receipt"
- "tsc"
- "xprinter"

Example matches:
- âœ… XPrinter 58mm Thermal Receipt Printer
- âœ… TSC TDP-247 58mm
- âœ… Zebra GC420 Thermal
- âœ… Brother QL-810W Receipt Label Printer
- âœ… SEWOO LK-P45 58mm Portable Printer
- âŒ HP LaserJet Pro (would use as fallback only)
- âŒ Ricoh MP C3503 (standard office printer)

## Error Handling

```
Error Scenario          â”‚ Response
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
No printers found       â”‚ Show UI message: "No printers found"
Printer disconnected    â”‚ Fall back to default printer
Selection missing       â”‚ Auto-select first available
API unavailable         â”‚ Use browser print dialog
Print job fails         â”‚ Log to console, show generic error
```

---

**Visual Guide Version:** 1.0  
**Updated:** December 21, 2025
